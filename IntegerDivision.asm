    @R1
    D=M
    @INVALID
    D;JEQ
    @R4
    M=0

    @R0
    D=M
    @R5
    M=D
    @R1
    D=M
    @R6
    M=D

    @R5
    D=M
    @POSX
    D;JGE
    @R5
    D=M
    D=-D
    @R7
    M=D
    @CONTX
    0;JMP
(POSX)
    @R5
    D=M
    @R7
    M=D
(CONTX)

    @R6
    D=M
    @POSY
    D;JGE
    @R6
    D=M
    D=-D
    @R8
    M=D
    @CONTY
    0;JMP
(POSY)
    @R6
    D=M
    @R8
    M=D
(CONTY)

    @R7
    D=M
    @R3
    M=D
    @R2
    M=0

(LOOP)
    @R3
    D=M
    @R8
    D=D-M
    @ENDLOOP
    D;JLT
    @R3
    D=M
    @R8
    D=D-M
    @R3
    M=D
    @R2
    M=M+1
    @LOOP
    0;JMP
(ENDLOOP)

    @R5
    D=M
    @XNEG
    D;JLT
    @R6
    D=M
    @YNEGNONX
    D;JLT
    @DONEQ
    0;JMP
(YNEGNONX)
    @R2
    D=M
    D=-D
    @R2
    M=D
    @DONEQ
    0;JMP
(XNEG)
    @R6
    D=M
    @YNEGX
    D;JLT
    @R2
    D=M
    D=-D
    @R2
    M=D
(YNEGX)
(DONEQ)

    @R5
    D=M
    @DONER
    D;JGE
    @R3
    D=M
    D=-D
    @R3
    M=D
(DONER)

    @END
    0;JMP

(INVALID)
    @R4
    M=1
    @R2
    M=0
    @R3
    M=0
    @END
    0;JMP

(END)
